---
phase: 04-testing-verification
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/04-testing-verification/TEST-SCENARIOS.md
  - .planning/phases/04-testing-verification/IMPORT-RESULTS.md
autonomous: false

must_haves:
  truths:
    - "Basic template generation produces valid .mt files"
    - "Generated templates import to MasterControl Mx without errors"
    - "Phase additions preserve ISA-88 hierarchy structure"
    - "Downloaded files contain unique UUIDs (no duplicates)"
  artifacts:
    - path: ".planning/phases/04-testing-verification/TEST-SCENARIOS.md"
      provides: "Documented test scenarios with expected outcomes"
    - path: ".planning/phases/04-testing-verification/IMPORT-RESULTS.md"
      provides: "Import test results from MasterControl Mx"
  key_links:
    - from: "generated .mt file"
      to: "MasterControl Mx import"
      via: "file upload"
      pattern: "Import successful"
---

<objective>
Test generated templates import successfully into MasterControl Mx production system.

Purpose: Validate that the template generator produces files that actually work in the target system. Competition demo requires reliable imports.
Output: Documented test scenarios with import results proving system works end-to-end.
</objective>

<execution_context>
@/Users/kfarley@mastercontrol.com/.claude/get-shit-done/workflows/execute-plan.md
@/Users/kfarley@mastercontrol.com/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/03-natural-language-understanding/03-01-SUMMARY.md
@ANALYSIS.md

Key understanding from context:
- Current implementation uses programmatic modification for "add phase" commands
- ISA-88 hierarchy: PROCEDURE → UNIT_PROCEDURE → OPERATION → PHASE → PHASE_STEP → SUB_PHASE_STEP
- Known potential gaps: structureDisplay on PHASE_STEP, CORRECTION children on DATA_ENTRY
- Deployed to: https://mx-template-generator-production.up.railway.app/
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create test scenario documentation</name>
  <files>.planning/phases/04-testing-verification/TEST-SCENARIOS.md</files>
  <action>
Create TEST-SCENARIOS.md documenting all test scenarios to execute:

## Test Categories

### Category 1: Basic Clone Tests
1. Clone baseline-minimal without modifications → expect valid JSON with new UUIDs
2. Clone baseline-simple without modifications → expect valid JSON with new UUIDs
3. Clone baseline-standard without modifications → expect valid JSON with new UUIDs

### Category 2: Simple Modification Tests
4. baseline-simple + "add phase Quality Check" → expect new phase added
5. baseline-simple + "add phase Verification with witness" → expect phase with WITNESS sign-off
6. baseline-simple + "add phase Final Review with witness and verify" → expect phase with both sign-offs

### Category 3: Complex Modification Tests
7. baseline-ysvod + "add phase Equipment Check" → larger template modification
8. Multiple phase additions (if supported)

### Category 4: Edge Cases
9. Empty modification request → should clone with new UUIDs only
10. Invalid template selection → should return error

For each scenario document:
- Input: template ID + modification request
- Expected output: what the JSON should contain
- Verification: how to confirm success (JSON structure check, Mx import)
  </action>
  <verify>cat .planning/phases/04-testing-verification/TEST-SCENARIOS.md | head -100 shows documented test scenarios</verify>
  <done>TEST-SCENARIOS.md exists with 10+ documented test scenarios covering basic, modification, and edge cases</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <name>Task 2: Execute import tests in MasterControl Mx</name>
  <what-built>Test scenarios documented. User must now execute imports in the actual MasterControl Mx system to validate.</what-built>
  <how-to-verify>
The user must perform these tests manually in MasterControl Mx:

**Preparation:**
1. Access https://mx-template-generator-production.up.railway.app/
2. Have MasterControl Mx admin access ready

**Test Execution (record results for each):**

**Test 1: Basic Clone**
1. Select "Baseline Simple" template
2. Leave modification field empty
3. Click Generate Template
4. Download the .mt file
5. Import to MasterControl Mx
6. Record: Did import succeed? Any errors?

**Test 2: Add Phase**
1. Select "Baseline Simple" template
2. Enter: "add phase Quality Check"
3. Click Generate Template
4. Download the .mt file
5. Import to MasterControl Mx
6. Record: Did import succeed? Is "Quality Check" phase visible?

**Test 3: Add Phase with Properties**
1. Select "Baseline Simple" template
2. Enter: "add phase Final Review with witness and verify"
3. Click Generate Template
4. Download the .mt file
5. Import to MasterControl Mx
6. Record: Did import succeed? Does phase have witness/verify sign-offs?

**For each test, record:**
- Template selected
- Modification request (if any)
- Import result: SUCCESS / FAILED
- Error message (if failed)
- Notes about the imported template structure

When complete, create IMPORT-RESULTS.md with findings.
  </how-to-verify>
  <resume-signal>Type "tests complete" with summary of results, or describe issues found</resume-signal>
</task>

</tasks>

<verification>
Phase verification after checkpoint:
1. TEST-SCENARIOS.md documents all test scenarios
2. User has executed imports in MasterControl Mx
3. IMPORT-RESULTS.md captures actual import outcomes
4. Any failures are documented with error details for Phase 4.2 fixes
</verification>

<success_criteria>
- TEST-SCENARIOS.md exists with comprehensive test coverage
- At least 3 import tests executed in actual MasterControl Mx system
- Results documented with SUCCESS/FAILED status for each
- Import failures (if any) have error details captured
</success_criteria>

<output>
After completion, create `.planning/phases/04-testing-verification/04-01-SUMMARY.md`
</output>
